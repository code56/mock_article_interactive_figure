<!DOCTYPE HTML>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />

<html>
    <head>
    <title>jQuery $.getJSON() function and jQuery UI Autocomplete</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js" ></script>
    <script src="https://code.jquery.com/ui/jquery-ui-git.js"></script>

    <link href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" rel="Stylesheet"></link>

        <script type="text/javascript">
        	$(document).ready(function(){
                $.getJSON('http://www.ebi.ac.uk/ols/api/select?q=potato&rows=10&ontology=po', function(OLSresults) {
        			// no need to do .parseJSON()
        			console.log(OLSresults.responseHeader.params.hl); // true
        			var results = OLSresults;
                    console.log(results);


                    
                    //$(selector).autocomplete(options e.g. serviceURL);
                    $( "#autocomplete" ).autocomplete({
                        serviceUrl: 'http://www.ebi.ac.uk/ols/api/suggest?q={query}',
                        onSelect: function(suggestion){
                            alert('You selected: ' + suggestion.value + ', ' + suggestion.data);
                        }

                        }); 
                            //console.log(array);
                    });

      		});
       		
        		
        			//document.write(OLSresults.responseHeader); this works only with simple json objects, accesing complex models required recursion. 
       		

                    //good example: https://www.youtube.com/watch?v=D5pI_L2BC3A
        $(document).ready(function(){
            
            $.getJSON('http://www.ebi.ac.uk/ols/api/select?q=potato&rows=10&ontology=po', function(OLSresults) {
                $('#plant_type').autocomplete({
              //  source: ['Choice 1', 'Choice 2'] // this works
                //source: 'http://www.ebi.ac.uk/ols/api/select?q=potato&rows=10&ontology=po'
                source: OLSresults
                });
            });
        });            


        //another function 

        var OLSresults1 = $.getJSON('http://www.ebi.ac.uk/ols/api/select?q=potato&rows=10&ontology=po')
        console.log(OLSresults1)
        //$(document).ready(function(){



        </script>


        <script>
        $.ajax({
            type: 'GET',
            url: 'http://www.ebi.ac.uk/ols/api/select?q=potato&rows=10&ontology=po',
            dataType: 'json',
            success: function(data) {
      // handle response here
            console.log(data);
            console.log(data.responseHeader);
            }
        });
        </script>

        <script>
        jQuery(document).ready(function() {

            $("#tags").autocomplete({
                minLength: 0,
                source: function(request, response) {
                    var term = request.term;
                    $.getJSON("http://www.ebi.ac.uk/ols/api/suggest?q={query}")
                    //https://gist.githubusercontent.com/anonymous/86f61fee217838ba6c3c/raw/395a557fa400163f048f30370d782db554913b2b/availableTags.json
                        .then(function success(data) {
                        var res = $.grep(data, function(val) {
                            return new RegExp($.ui.autocomplete.escapeRegex(term), "gi")
                                .test(val.toLowerCase())
                        })
                        , key = $.inArray(term.toUpperCase(), res)
                        , results = term.length === 1 
                                && key !== -1 
                                ? Array(res[key]) 
                               :res;
                        response(results)
                        }, function error(jqxhr, textStatus, errorThrown) {
                            console.log(textStatus, errorThrown) // log `$.ajax` errors
                    })
                }
            }).focus(function() {
                $(this).autocomplete("search", $(this).val())
            });
  
    });

    </script>
<!--         <body>
       <script src="dropdown_list.js"></script>
        <div id ="myDiv">Append here</div>
    </body> -->

    <body>
        <input type="text" name="country" id="autocomplete"/>

       <div class="ui-widget">
            <label for="tags">Tags:</label>
            <input id="tags">
        </div>
        <form method="post" action="" id="formToSave">
    <dl>
        <dt>Plant of sample:</dt>
        <dd><input type="text" id="plant_type" value="e.g. wheat" /></dd>
        <dt>Tissue of sample:</dt>
        <dd><input type="text" id="tissue" value="e.g. bran" /></dd>
    </dl>

    <!--this button doesn't have any functionality attached to it yet-->
<!--     <p><button type="submit"><img src="http://www.suttonrunners.org/images/save_icon.gif" alt=""/> Save as TXT</button></p>
 -->    </form>
    </body>    

</html>